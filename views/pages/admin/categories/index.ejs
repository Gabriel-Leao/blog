<%- include('../../../partials/header') %>
  <%- include('../../../partials/navbar') %>
  <div class="container">
    <div id="category-title">
      <h2>Categorias</h2>
      <a class="btn btn-success" href="/admin/categories/new">Criar categoria</a>
    </div>
    <hr>

    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Id</th>
          <th>Título</th>
          <th>Slug</th>
          <th>Ações</th>
        </tr>
      </thead>

      <tbody>
        <% categories.map(category => { %>
          <tr>
            <td> <%= category.id %></td>
            <td> <%= category.title %></td>
            <td> <%= category.slug %></td>
            <td id="actions">
              <a href="/admin/categories/edit/<%= category.id %>" class="btn btn-primary mx-2"><i class="fa-solid fa-pen-to-square"></i></a>
              <form action="/admin/categories/delete" method="post" onsubmit="confirmDeletion(this)">
                <input type="hidden" name="id" value="<%= category.id %>">
                <button class="btn btn-danger"><i class="fa-solid fa-trash"></i></button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

  <script src="https://kit.fontawesome.com/dfc6253c2b.js" crossorigin="anonymous"></script>
  <script>
    const confirmDeletion = (form) => {
      event.preventDefault()
      const decision = confirm("Você deseja deletar está categoria?")
      if (decision) {
        form.submit()
      } else {}
    }
  </script>
<%- include('../../../partials/footer') %>